<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Neurovision AI — MRI Anatomical Brain</title>

<style>

body{
    background:black;
    color:white;
    text-align:center;
    font-family:Arial;
    margin-top:40px;
}

button{
    padding:12px;
    font-size:18px;
    margin-top:10px;
    cursor:pointer;
    background:#00ffcc;
    border:none;
    border-radius:5px;
}

button:hover{
    background:#00ccaa;
}

#outputImage{
    margin-top:20px;
    border:2px solid white;
    display:none;
}

#status{
    margin-top:15px;
    font-size:18px;
    color:#00ffcc;
}

</style>

</head>

<body>

<h2>Neurovision AI — MRI Anatomical Brain</h2>


<form id="uploadForm">

<input 
    type="file" 
    id="fileInput" 
    name="file"
    accept="image/png,image/jpeg,image/jpg"
    required
>

<br>

<button type="submit">Analyze</button>

</form>


<p id="status"></p>


<img id="outputImage" width="400"/>



<script>

document.getElementById("uploadForm").addEventListener("submit", async function(e){

    e.preventDefault()

    const status = document.getElementById("status")
    const outputImage = document.getElementById("outputImage")

    const fileInput = document.getElementById("fileInput")

    if(fileInput.files.length === 0){

        status.innerText = "Select a file first"
        return

    }

    const file = fileInput.files[0]

    const formData = new FormData()

    // CRITICAL: key must match backend
    formData.append("file", file)

    status.innerText = "Analyzing..."

    try{

        const response = await fetch(
            window.location.origin + "/analyze",
            {
                method: "POST",
                body: formData
            }
        )

        const result = await response.json()

        status.innerText = result.message

        if(result.output){

            outputImage.src =
                window.location.origin +
                result.output +
                "?t=" +
                new Date().getTime()

            outputImage.style.display = "block"

        }

    }
    catch(error){

        status.innerText = "Error: " + error

    }

})

</script>


</body>
</html>